<html>
<script language="javascript" type="text/javascript" src="p5.min.js"></script>
<script type="text/javascript" 
	 src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script language="javascript" type="text/javascript">

class Flag
{
  constructor(ptx, pty, linex1, liney1, linex2, liney2)
  {
     this.ptx = ptx;
     this.pty = pty;
     this.linex1 = linex1;
     this.liney1 = liney1;
     this.linex2 = linex2;
     this.liney2 = liney2;
  }

  draw()
  {
     fill(255, 127, 0);
     stroke(255, 127, 0);
     strokeWeight(16);
     ellipse(this.ptx, this.pty, 40, 40);
     line(this.linex1, this.liney1, this.linex2, this.liney2);

     fill(0, 0, 0);
     stroke(0, 0, 0);
     strokeWeight(2);
     ellipse(200, 350, 25, 25);
     line(100, 350, 400, 350);      
  }
}

class FlagVariety
{
  constructor(f1, f2, size, offset)
  {
    this.f1 = f1;
    this.f2 = f2;
    this.offset = offset;
    this.scale = size/500.0;
  }

  interpolate(f1, f2, alpha)
  {
     var ptx = flag1.ptx * (1-alpha) + flag2.ptx * alpha;
     var pty = flag1.pty * (1-alpha) + flag2.pty * alpha;
     var linex1 = flag1.linex1 * (1-alpha) + flag2.linex1 * alpha;
     var liney1 = flag1.liney1 * (1-alpha) + flag2.liney1 * alpha;
     var linex2 = flag1.linex2 * (1-alpha) + flag2.linex2 * alpha;
     var liney2 = flag1.liney2 * (1-alpha) + flag2.liney2 * alpha;
     return new Flag(ptx, pty, linex1, liney1, linex2, liney2);
  }

  draw()
  {
     push();
     scale(this.scale);
     var a = document.getElementById('a').value / 100.0;
     var flag = this.interpolate(this.f1, this.f2, a);
     flag.draw();
     pop();
  }
}

var flag1 = new Flag(100, 350, 100, 350, 400, 350);
var flag2 = new Flag(400, 350, 100, 350, 400, 350);
var variety = new FlagVariety(flag1, flag2, 200, {x:0,y:0});

function setup() 
{
   var width = 200.0;
   var height = 200.0;

   createCanvas(width, height);
   console.log("TEST");   
}

function draw() 
{
   background(200);
   variety.draw();
}

</script>

<body>
<div id="slider" style="position:absolute;top:1em;left:1em;">
<label for="points">a</label> <input type="range" name="points" id="a" value="50" min="0" max="100" onchange="UpdateMath(this.value)" style="vertical-align:middle;"/>
</div>
<div style="display:flex;flex-direction:row;flex-wrap:nowrap;position:absolute;top:2em;left:1em">
<div id="a0" style="width:0px;visibility:hidden">
\[
\begin{bmatrix}
0 &1&0\\
1&0&0\\
0&0&1
\end{bmatrix}
\]
</div>
<div id="a">
\[
\begin{bmatrix}
a &1&0\\
1&0&0\\
0&0&1
\end{bmatrix}
\]
</div>
<div id="aInf" style="width:0px;visibility:hidden">
\[
\begin{bmatrix}
\infty &1&0\\
1&0&0\\
0&0&1
\end{bmatrix}
\]
</div>
</div>

</body>
</html>


