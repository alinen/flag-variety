<html>
<script language="javascript" type="text/javascript" src="p5.min.js"></script>
<script type="text/javascript" 
	 src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script language="javascript" type="text/javascript">
  //
  //  Use a closure to hide the local variables from the
  //  global namespace
  //
  (function () {
    var QUEUE = MathJax.Hub.queue;  // shorthand for the queue
    var math = null, box = null;    // the element jax for the math output, and the box it's in

    //
    //  Get the element jax when MathJax has produced it.
    //
    QUEUE.Push(function () {
      math = MathJax.Hub.getAllJax("MathOutput")[0];
    });

    //
    //  The onchange event handler that typesets the math entered
    //  by the user.  Hide the box, then typeset, then show it again
    //  so we don't see a flash as the math is cleared and replaced.
    //
    window.UpdateMath = function (TeX) {
       a = 'a';
       if (TeX === '0') a = '0';
       else if (TeX === '100') a = '\\infty';
       str = "\\begin{bmatrix}\n";
       str += a+" &1&0\\\\ \n";
       str += "1&0&0\\\\ \n";
       str += "0&0&1 \n";
       str += "\\end{bmatrix}\n";
       console.log(str);
      QUEUE.Push(
          ["resetEquationNumbers",MathJax.InputJax.TeX],
          ["Text",math,"\\displaystyle{"+str+"}"],
      );
    }
  })();
</script>

<script language="javascript" type="text/javascript">
class Flag
{
  constructor(ptx, pty, linex1, liney1, linex2, liney2)
  {
     this.ptx = ptx;
     this.pty = pty;
     this.linex1 = linex1;
     this.liney1 = liney1;
     this.linex2 = linex2;
     this.liney2 = liney2;
  }
}

var flag1 = new Flag(100, 250, 100, 250, 400, 250);
var flag2 = new Flag(400, 250, 100, 250, 400, 250);

function interpolate(f1, f2, alpha)
{
   var ptx = flag1.ptx * (1-alpha) + flag2.ptx * alpha;
   var pty = flag1.pty * (1-alpha) + flag2.pty * alpha;
   var linex1 = flag1.linex1 * (1-alpha) + flag2.linex1 * alpha;
   var liney1 = flag1.liney1 * (1-alpha) + flag2.liney1 * alpha;
   var linex2 = flag1.linex2 * (1-alpha) + flag2.linex2 * alpha;
   var liney2 = flag1.liney2 * (1-alpha) + flag2.liney2 * alpha;
   return new Flag(ptx, pty, linex1, liney1, linex2, liney2);
}

function drawFlag(f)
{
   fill(255, 127, 0);
   stroke(255, 127, 0);
   strokeWeight(16);
   ellipse(f.ptx, f.pty, 40, 40);
   line(f.linex1, f.liney1, f.linex2, f.liney2);
}

function setup() 
{
   var width = 500.0;
   var height = 500.0;

   createCanvas(width, height);
   console.log("TEST");   
}

function draw() 
{
   background(200);
   
   var a = document.getElementById('a').value / 100.0;
   flag = interpolate(flag1, flag2, a);
   drawFlag(flag);

   fill(0, 0, 0);
   stroke(0, 0, 0);
   strokeWeight(2);
   ellipse(200, 250, 25, 25);
   line(100, 250, 400, 250);      
}

</script>
<body>
<label for="points">a:</label> <input type="range" name="points" id="a" value="50" min="0" max="100" onchange="UpdateMath(this.value)"/>
<div id="MathOutput">
\[
\begin{bmatrix}
a &1&0\\
1&0&0\\
0&0&1
\end{bmatrix}
\]
</div>

</body>
</html>


